---
# Usage: ansible-playbook windows_service_account_rights.yml -e "target_hosts=production"
# Or:    ansible-playbook windows_service_account_rights.yml -e "target_hosts=sql_servers"
# Or:    ansible-playbook windows_service_account_rights.yml -e "target_hosts=development:staging"
#
# To remove user rights instead of adding them:
#        ansible-playbook windows_service_account_rights.yml -e "target_hosts=production" -e "user_rights_action=remove"

- name: Configure Windows Service Account User Rights
  hosts: "{{ target_hosts }}"
  gather_facts: false

  vars:
    # Customize these variables as needed
    service_name: MSSQLSERVER

  roles:
    - windows_service_account_rights

  # Alternative: Use the role with different parameters for multiple services
  # tasks:
  #   - name: Configure SQL Server default instance
  #     ansible.builtin.include_role:
  #       name: windows_service_account_rights
  #     vars:
  #       service_name: MSSQLSERVER
  #
  #   - name: Configure SQL Server Agent
  #     ansible.builtin.include_role:
  #       name: windows_service_account_rights
  #     vars:
  #       service_name: SQLSERVERAGENT
